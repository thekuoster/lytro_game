/*
 * jQuery UI Spinner 1.9m3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Spinner
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 */(function(d){d.widget("ui.spinner",{options:{incremental:true,max:null,min:null,numberformat:null,step:null,value:null},_create:function(){this._draw();this._markupOptions();this._mousewheel();this._aria()},_markupOptions:function(){var a=this;d.each({min:-Number.MAX_VALUE,max:Number.MAX_VALUE,step:1},function(b,e){if(a.options[b]===null){var c=a.element.attr(b);a.options[b]=typeof c=="string"&&c.length>0?a._parse(c):e}});this.value(this.options.value!==null?this.options.value:this.element.val()||
0)},_draw:function(){var a=this,b=a.options,e=this.uiSpinner=a.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(a._uiSpinnerHtml()).parent().append(a._buttonHtml()).hover(function(){b.disabled||d(this).addClass("ui-state-hover");a.hovered=true},function(){d(this).removeClass("ui-state-hover");a.hovered=false});!d.support.opacity&&e.css("display")=="inline-block"&&d.browser.version<8&&e.css("display","inline");this.element.bind("keydown.spinner",function(c){if(!a.options.disabled){if(a._start(c))return a._keydown(c);
return true}}).bind("keyup.spinner",function(c){if(!a.options.disabled)if(a.spinning){a._stop(c);a._change(c)}}).bind("focus.spinner",function(){e.addClass("ui-state-active");a.focused=true}).bind("blur.spinner",function(){a.value(a.element.val());a.hovered||e.removeClass("ui-state-active");a.focused=false});this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all").bind("mousedown",function(c){if(!a.options.disabled){if(a._start(c)===false)return false;a._repeat(null,
d(this).hasClass("ui-spinner-up")?1:-1,c)}}).bind("mouseup",function(c){if(!a.options.disabled)if(a.spinning){a._stop(c);a._change(c)}}).bind("mouseenter",function(){if(!a.options.disabled)if(d(this).hasClass("ui-state-active")){if(a._start(event)===false)return false;a._repeat(null,d(this).hasClass("ui-spinner-up")?1:-1,event)}}).bind("mouseleave",function(){if(a.spinning){a._stop(event);a._change(event)}});b.disabled&&this.disable()},_keydown:function(a){var b=d.ui.keyCode;switch(a.keyCode){case b.UP:this._repeat(null,
1,a);return false;case b.DOWN:this._repeat(null,-1,a);return false;case b.PAGE_UP:this._repeat(null,10,a);return false;case b.PAGE_DOWN:this._repeat(null,-10,a);return false;case b.ENTER:this.value(this.element.val())}return true},_mousewheel:function(){if(d.fn.mousewheel){var a=this;this.element.bind("mousewheel.spinner",function(b,e){if(!a.options.disabled){if(!a.spinning&&!a._start(b))return false;a._spin((e>0?1:-1)*a.options.step,b);clearTimeout(a.timeout);a.timeout=setTimeout(function(){if(a.spinning){a._stop(b);
a._change(b)}},100);b.preventDefault()}})}},_uiSpinnerHtml:function(){return'<div role="spinbutton" class="ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all"></div>'},_buttonHtml:function(){return'<a class="ui-spinner-button ui-spinner-up ui-corner-tr"><span class="ui-icon ui-icon-triangle-1-n">&#9650;</span></a><a class="ui-spinner-button ui-spinner-down ui-corner-br"><span class="ui-icon ui-icon-triangle-1-s">&#9660;</span></a>'},_start:function(a){if(!this.spinning&&this._trigger("start",
a)!==false){if(!this.counter)this.counter=1;return this.spinning=true}return false},_repeat:function(a,b,e){var c=this;a=a||500;clearTimeout(this.timer);this.timer=setTimeout(function(){c._repeat(40,b,e)},a);c._spin(b*c.options.step,e)},_spin:function(a,b){if(!this.counter)this.counter=1;a=this.value()+a*(this.options.incremental&&this.counter>20?this.counter>100?this.counter>200?100:10:2:1);if(this._trigger("spin",b,{value:a})!==false){this.value(a);this.counter++}},_stop:function(a){this.counter=
0;this.timer&&window.clearTimeout(this.timer);this.element[0].focus();this.spinning=false;this._trigger("stop",a)},_change:function(a){this._trigger("change",a)},_setOption:function(a,b){if(a=="value"){b=this._parse(b);if(b<this.options.min)b=this.options.min;if(b>this.options.max)b=this.options.max}if(a=="disabled")if(b){this.element.attr("disabled",true);this.buttons.button("disable")}else{this.element.removeAttr("disabled");this.buttons.button("enable")}d.Widget.prototype._setOption.call(this,
a,b)},_setOptions:function(a){d.Widget.prototype._setOptions.call(this,a);"value"in a&&this._format(this.options.value);this._aria()},_aria:function(){this.uiSpinner.attr("aria-valuemin",this.options.min).attr("aria-valuemax",this.options.max).attr("aria-valuenow",this.options.value)},_parse:function(a){if(typeof a=="string"){if(this.options.numberformat=="C"&&window.Globalization)a=a.replace((Globalization.culture||Globalization.cultures["default"]).numberFormat.currency.symbol,"");a=window.Globalization&&
this.options.numberformat?Globalization.parseFloat(a):+a}return isNaN(a)?null:a},_format:function(a){a=this.options.value;this.element.val(window.Globalization&&this.options.numberformat?Globalization.format(a,this.options.numberformat):a)},destroy:function(){this.element.removeClass("ui-spinner-input").removeAttr("disabled").removeAttr("autocomplete");d.Widget.prototype.destroy.call(this);this.uiSpinner.replaceWith(this.element)},stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:function(a){this._spin((a||
1)*-this.options.step)},pageUp:function(a){this.stepUp((a||1)*10)},pageDown:function(a){this.stepDown((a||1)*10)},value:function(a){if(!arguments.length)return this._parse(this.element.val());this.option("value",a)},widget:function(){return this.uiSpinner}})})(jQuery);
